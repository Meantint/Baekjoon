---
title: "프로그래머스 - 디스크 컨트롤러"
date: 2020-08-12T16:53:22+09:00
categories:
- Programmers
tags:
- Programmers
- 프로그래머스
- 디스크 컨트롤러
draft: false
---

[[프로그래머스](https://programmers.co.kr/learn/courses/30/lessons/42627) - [디스크 컨트롤러](https://programmers.co.kr/learn/courses/30/lessons/42627)]

&nbsp;[https://mungto.tistory.com/15](https://mungto.tistory.com/15)를 참고하여 풀었습니다.

&nbsp;프로그래머스 레벨 2를 한문제를 남겨놓고 레벨 3에 입문했는데 혼자 힘만으로 풀 수 있는 문제가 거의 존재하지 않는걸 보니 아직도 실력이 많이 부족한 것 같다.

&nbsp;하나 더, 문제를 풀면서 `cmp`를 짤 때 `p1.first + p1.second > p2.first + p2.second`여야 한다고 생각했는데 실제 조건은 `p1.second > p2.second`여야 해서 헷갈렸다. 결론만 말하자면 작업 요청이 얼마나 빨리 들어왔는지의 유무와는 상관없이 작업이 걸리는 시간만 답에 영향을 미친다.

My Programmers Code : [https://github.com/Meantint/Programmers](https://github.com/Meantint/Programmers)

<hr>

# 풀이

- `priority_queue`를 사용해야 하므로 선언해준다.

- `jobs`가 어떤 식으로 입력되어있는지 모르기 때문에 요청 받은 시간을 기준으로 오름차순 정렬한다.

- `idx`가 `size`보다 작고 `jobs[idx][0]`이 `time`보다 작거나 같다면 우선순위 큐에 `jobs[idx]`를 넣어준다.
 
  - `time`보다 작은 요청들 모두 우선순위 큐에 넣어놓아야 하기 때문에 `continue` 사용.

- 우선순위 큐가 비어있지 않다면 `time`과 `answer`의 값을 변경해준 후 `pq.pop()`

- 우선순위 큐가 비어있다면 `time`을 다음 요청인 `jobs[idx][0]`으로 변경 시켜준다.

- while문을 완료한 후 나온 정답을 `jobs.size()`로 나누어준다.


<hr>

# Code

```c++
#include <bits/stdc++.h>

#define PII pair<int, int>

using namespace std;

struct cmp {
    bool operator()(PII p1, PII p2)
    {
        return p1.second > p2.second;
    }
};

int solution(vector<vector<int>> jobs)
{
    int answer = 0, idx = 0, time = 0;

    sort(jobs.begin(), jobs.end());
    priority_queue<PII, vector<PII>, cmp> pq;

    int size = jobs.size();
    while (!pq.empty() || idx < size) {
        if (idx < size && jobs[idx][0] <= time) {
            pq.push(make_pair(jobs[idx][0], jobs[idx][1]));
            ++idx;
            continue;
        }
        if (!pq.empty()) {
            time += pq.top().second;
            answer += time - pq.top().first;
            pq.pop();
        }
        else {
            time = jobs[idx][0];
        }
    }
    answer /= size;

    return answer;
}

int main()
{
    cout << solution({ { 0, 3 }, { 1, 9 }, { 2, 6 } }) << endl;

    return 0;
}
```

<hr>