<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>프로그래머스 - 디스크 컨트롤러</title>

	<link rel="stylesheet" type="text/css" href="/css/bulma.css">
</head>

<body>
	<p>[<a href="https://programmers.co.kr/learn/courses/30/lessons/42627">프로그래머스</a> - <a href="https://programmers.co.kr/learn/courses/30/lessons/42627">디스크 컨트롤러</a>]</p>
<p> <a href="https://mungto.tistory.com/15">https://mungto.tistory.com/15</a>를 참고하여 풀었습니다.</p>
<p> 프로그래머스 레벨 2를 한문제를 남겨놓고 레벨 3에 입문했는데 혼자 힘만으로 풀 수 있는 문제가 거의 존재하지 않는걸 보니 아직도 실력이 많이 부족한 것 같다.</p>
<p> 하나 더, 문제를 풀면서 <code>cmp</code>를 짤 때 <code>p1.first + p1.second &gt; p2.first + p2.second</code>여야 한다고 생각했는데 실제 조건은 <code>p1.second &gt; p2.second</code>여야 해서 헷갈렸다. 결론만 말하자면 작업 요청이 얼마나 빨리 들어왔는지의 유무와는 상관없이 작업이 걸리는 시간만 답에 영향을 미친다.</p>
<hr>
<h1 id="풀이">풀이</h1>
<ul>
<li>
<p><code>priority_queue</code>를 사용해야 하므로 선언해준다.</p>
</li>
<li>
<p><code>jobs</code>가 어떤 식으로 입력되어있는지 모르기 때문에 요청 받은 시간을 기준으로 오름차순 정렬한다.</p>
</li>
<li>
<p><code>idx</code>가 <code>size</code>보다 작고 <code>jobs[idx][0]</code>이 <code>time</code>보다 작거나 같다면 우선순위 큐에 <code>jobs[idx]</code>를 넣어준다.</p>
<ul>
<li><code>time</code>보다 작은 요청들 모두 우선순위 큐에 넣어놓아야 하기 때문에 <code>continue</code> 사용.</li>
</ul>
</li>
<li>
<p>우선순위 큐가 비어있지 않다면 <code>time</code>과 <code>answer</code>의 값을 변경해준 후 <code>pq.pop()</code></p>
</li>
<li>
<p>우선순위 큐가 비어있다면 <code>time</code>을 다음 요청인 <code>jobs[idx][0]</code>으로 변경 시켜준다.</p>
</li>
<li>
<p>while문을 완료한 후 나온 정답을 <code>jobs.size()</code>로 나누어준다.</p>
</li>
</ul>
<hr>
<h1 id="code">Code</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#define PII pair&lt;int, int&gt;
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">cmp</span> {
    <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">operator</span>()(PII p1, PII p2)
    {
        <span style="color:#66d9ef">return</span> p1.second <span style="color:#f92672">&gt;</span> p2.second;
    }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">solution</span>(vector<span style="color:#f92672">&lt;</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&gt;</span> jobs)
{
    <span style="color:#66d9ef">int</span> answer <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, time <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

    sort(jobs.begin(), jobs.end());
    priority_queue<span style="color:#f92672">&lt;</span>PII, vector<span style="color:#f92672">&lt;</span>PII<span style="color:#f92672">&gt;</span>, cmp<span style="color:#f92672">&gt;</span> pq;

    <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> jobs.size();
    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>pq.empty() <span style="color:#f92672">||</span> idx <span style="color:#f92672">&lt;</span> size) {
        <span style="color:#66d9ef">if</span> (idx <span style="color:#f92672">&lt;</span> size <span style="color:#f92672">&amp;&amp;</span> jobs[idx][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;=</span> time) {
            pq.push(make_pair(jobs[idx][<span style="color:#ae81ff">0</span>], jobs[idx][<span style="color:#ae81ff">1</span>]));
            <span style="color:#f92672">++</span>idx;
            <span style="color:#66d9ef">continue</span>;
        }
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>pq.empty()) {
            time <span style="color:#f92672">+=</span> pq.top().second;
            answer <span style="color:#f92672">+=</span> time <span style="color:#f92672">-</span> pq.top().first;
            pq.pop();
        }
        <span style="color:#66d9ef">else</span> {
            time <span style="color:#f92672">=</span> jobs[idx][<span style="color:#ae81ff">0</span>];
        }
    }
    answer <span style="color:#f92672">/=</span> size;

    <span style="color:#66d9ef">return</span> answer;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    cout <span style="color:#f92672">&lt;&lt;</span> solution({ { <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span> }, { <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">9</span> }, { <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">6</span> } }) <span style="color:#f92672">&lt;&lt;</span> endl;

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><hr>
</body>

</html>